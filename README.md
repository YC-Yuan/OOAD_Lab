# OOAD Lab

19302010020 袁逸聪

## 需求理解

基于命令行的网站书签编辑器，从指令和书签两方面理解需求

### 命令行

程序通过一条条接受命令的方式运作，对所有要处理的命令枚举并分类

- 需要支持undo、redo的命令
  - add
  - delete
- 无需undo的命令
  - 与文件系统交互的命令
    - open
    - save
  - 仅在命令行有输出表现的命令
    - show-tree
    - ls-tree
  - 网站标签增强命令
    - read-bookmark
    - 不需实现但要在结构上考虑的增强命令：打开/关闭阅读次数显示、标记正在编辑中的文件

### 书签

书签以类似于文件系统的方式管理，由标题和链接两部分组成

标题之间为树状结构，相当于文件夹；而链接涵盖在标题之下，相当于文件夹中的文件

## 面向对象模型

### 指令解析

Parser基类，含义为指令解析器

Parser的每个继承类对应一种指令，提供对输入的解析

程序入口在初始化时装载需要使用的Parser，逐个询问即可完成解析，不需要维护巨大的if-else函数

> 需要注意，指令必须是无歧义的，不存在一个输入可能被解析成两种不同的指令，否则不同的询问顺序将产生不同的结果，难以控制预期

Parser同时也是可执行命令的工厂，将指令中有含义的参数构造为可执行命令返回

### 可执行命令

Command基类，含义为可执行命令

由指令解析器生成，具有execute方法，即执行命令

#### 可撤销命令

ReversibleCommand接口，表示命令可撤销，要求实现undo方法，即撤销命令

### 节点

收藏夹和书签都是节点对象，可以放在其他收藏夹中，并具有不同的字段

收藏夹具有名称字段，层级则根据嵌套关系自动计算

书签具有名称字段和内容字段，内容字段存储具体的网址

考虑到标签还会有更多增强信息，将内容字段也视为增强信息管理


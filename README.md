# OOAD Lab

19302010020 袁逸聪

## 需求理解

基于命令行的网站书签编辑器，从指令和书签两方面理解需求

### 命令行

程序通过一条条接受命令的方式运作，对所有要处理的命令枚举并分类

- 需要支持undo、redo的命令
  - add
  - delete
- 无需undo的命令
  - 与文件系统交互的命令
    - open
    - save
  - 仅在命令行有输出表现的命令
    - show-tree
    - ls-tree
  - 网站标签增强命令
    - read-bookmark
    - 不需实现但要在结构上考虑的增强命令：打开/关闭阅读次数显示、标记正在编辑中的文件

### 书签

书签以类似于文件系统的方式管理，由标题和链接两部分组成

标题之间为树状结构，相当于文件夹；而链接涵盖在标题之下，相当于文件夹中的文件

## 面向对象模型

### 指令

Command基类，含义为指令，如add、delete

Command的每个继承类对应一种指令，统一在静态方法提供命令解析

由此，程序入口只需要逐个询问Command是否解析成功，不需要维护巨大的if-else函数

也可以通过增加/减少询问列表中的Command类，实现增加/减少指令功能的效果

> 需要注意，指令的解析过程应当是无歧义的，即不存在一个输入可能被解析成两种不同的指令。否则，这种模式可能因为Command被询问顺序的不同而造成不符合预期的结果。

#### 指令的静态域与对象实例

指令的静态域负责解析命令，并将命令的参数存储下来，构造到对象中

指令的对象实例中记录了指令参数，存储一个可执行的过程

#### 指令Undo与Redo

部分指令定义了逆过程，因而增加reversible接口，表示为可逆指令，要求实现undo方法

所有可逆指令在执行时将被加入UndoStack，undo时取出，放入RedoStack

redo时，则从RedoStack中取出，正常执行再放回

任何正常执行的新指令都将清空RedoStack

### 节点

收藏夹和书签都是节点对象，可以放在其他收藏夹中，并具有不同的字段

收藏夹具有名称字段，层级则根据嵌套关系自动计算

书签具有名称字段和内容字段，内容字段存储具体的网址

考虑到标签还会有更多增强信息，将内容字段也视为增强信息管理

